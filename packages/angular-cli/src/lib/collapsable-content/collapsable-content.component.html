<div
  *ngIf="visible"
  class="terminal-wrapper"
  [class.collapsed]="isCollapsed"
  [class.maximized]="isMaximized"
  [class.resizing]="isResizing"
  [attr.data-position]="position"
  [attr.data-resizable]="resizable"
  [attr.data-closable]="closable"
  [style]="isHorizontal
    ? { width: panelWidth + 'px' }
    : { height: panelHeight + 'px' }"
>
  <div class="terminal-header">
    <div class="resize-bar" (mousedown)="onResizeStart($event)">
      <div class="resize-grip"></div>
    </div>
    <div class="header-content">
      <p class="terminal-title">
        <svg
          class="title-icon"
          width="22"
          height="22"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <polyline points="4 17 10 11 4 5" />
          <line x1="12" y1="19" x2="20" y2="19" />
        </svg>
        CLI
      </p>
      <div class="action-buttons">
        <button
          class="panel-btn"
          [title]="!isMaximized ? 'Maximize' : 'Restore'"
          [disabled]="isCollapsed"
          (click)="toggleMaximizationTerminal()"
        >
          <svg
            *ngIf="!isMaximized"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.8"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <polyline points="15 3 21 3 21 9" />
            <polyline points="9 21 3 21 3 15" />
            <line x1="21" y1="3" x2="14" y2="10" />
            <line x1="3" y1="21" x2="10" y2="14" />
          </svg>
          <svg
            *ngIf="isMaximized"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.8"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <polyline points="4 14 10 14 10 20" />
            <polyline points="20 10 14 10 14 4" />
            <line x1="14" y1="10" x2="21" y2="3" />
            <line x1="3" y1="21" x2="10" y2="14" />
          </svg>
        </button>

        <button
          class="panel-btn"
          [title]="isCollapsed ? 'Expand' : 'Collapse'"
          (click)="toggleTerminal()"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.8"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <!-- bottom: up/down chevrons -->
            <polyline *ngIf="position === 'bottom' && isCollapsed" points="18 15 12 9 6 15" />
            <polyline *ngIf="position === 'bottom' && !isCollapsed" points="6 9 12 15 18 9" />
            <!-- top: down/up chevrons -->
            <polyline *ngIf="position === 'top' && isCollapsed" points="6 9 12 15 18 9" />
            <polyline *ngIf="position === 'top' && !isCollapsed" points="18 15 12 9 6 15" />
            <!-- left: right/left chevrons -->
            <polyline *ngIf="position === 'left' && isCollapsed" points="9 18 15 12 9 6" />
            <polyline *ngIf="position === 'left' && !isCollapsed" points="15 6 9 12 15 18" />
            <!-- right: left/right chevrons -->
            <polyline *ngIf="position === 'right' && isCollapsed" points="15 6 9 12 15 18" />
            <polyline *ngIf="position === 'right' && !isCollapsed" points="9 18 15 12 9 6" />
          </svg>
        </button>

        <button class="panel-btn panel-btn-close" title="Close" (click)="closeTerminal()">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.8"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
          </svg>
        </button>
      </div>
    </div>
  </div>
  <div class="terminal-content" *ngIf="!isCollapsed">
    <ng-content></ng-content>
  </div>
</div>
